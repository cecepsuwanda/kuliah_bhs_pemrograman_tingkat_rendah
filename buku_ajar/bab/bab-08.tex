\documentclass[../main.tex]{subfiles}
\ifSubfilesClassLoaded{\setcounter{chapter}{7}}{}
\begin{document}

\chapter{Interupsi Sistem dan BIOS/DOS}

\begin{subcpmk}
  \item Sub-CPMK 4.2: Menangani interupsi BIOS dan DOS (INT 10h, INT 21h) untuk input/output dan layanan sistem
  \item Sub-CPMK 2.1: Menulis program assembly sederhana dengan TASM syntax
\end{subcpmk}

% ============================================================
% MATERI POKOK
% ============================================================
\input{bab-08/section-8-1}
\input{bab-08/section-8-2}

\ifSubfilesClassLoaded{
  \renewcommand{\bibname}{Daftar Pustaka}
  \bibliographystyle{plain}
  \bibliography{../references}
}{}
\end{document}
  \item \textbf{Software Interrupts}: INT instruction calls
\end{itemize}

\section{DOS Interrupts (INT 21h)}

\subsection{DOS Function Calls}
\begin{verbatim}
MOV AH, function_number
; Set parameters in registers
INT 21h              ; Call DOS function
\end{verbatim}

\subsection{Common DOS Functions}

\subsubsection{Display String (AH=09h)}
\begin{verbatim}
MOV AH, 09h
MOV DX, offset string
INT 21h
string DB 'Hello World$'
\end{verbatim}

\subsubsection{Read Character (AH=01h)}
\begin{verbatim}
MOV AH, 01h
INT 21h              ; Character in AL
\end{verbatim}

\subsubsection{Read String (AH=0Ah)}
\begin{verbatim}
MOV AH, 0Ah
MOV DX, offset buffer
INT 21h
buffer DB 80, ?, 80 DUP(?)
\end{verbatim}

\subsubsection{Exit Program (AH=4Ch)}
\begin{verbatim}
MOV AH, 4Ch
INT 21h              ; Exit to DOS
\end{verbatim}

\section{BIOS Interrupts}

\subsection{Video Services (INT 10h)}

\subsubsection{Set Video Mode (AH=00h)}
\begin{verbatim}
MOV AH, 00h
MOV AL, mode        ; 03h = 80x25 text
INT 10h
\end{verbatim}

\subsubsection{Position Cursor (AH=02h)}
\begin{verbatim}
MOV AH, 02h
MOV BH, 0          ; Page number
MOV DH, row         ; Row (0-24)
MOV DL, col         ; Column (0-79)
INT 10h
\end{verbatim}

\subsubsection{Write Character (AH=09h)}
\begin{verbatim}
MOV AH, 09h
MOV AL, character
MOV BH, 0          ; Page
MOV BL, attribute   ; Color
MOV CX, count       ; Repeat count
INT 10h
\end{verbatim}

\subsection{Keyboard Services (INT 16h)}

\subsubsection{Check for Key (AH=01h)}
\begin{verbatim}
MOV AH, 01h
INT 16h
JZ no_key          ; ZF=1 if no key
; Key available in AX
\end{verbatim}

\subsubsection{Read Key (AH=00h)}
\begin{verbatim}
MOV AH, 00h
INT 16h              ; Key in AX (scan code in AH, ASCII in AL)
\end{verbatim}

\section{File Handling dengan DOS}

\subsection{Create File (AH=3Ch)}
\begin{verbatim}
MOV AH, 3Ch
MOV CX, 0          ; Normal attributes
MOV DX, offset filename
INT 21h
JC error            ; CF=1 if error
MOV handle, AX      ; Save file handle
\end{verbatim}

\subsection{Open File (AH=3Dh)}
\begin{verbatim}
MOV AH, 3Dh
MOV AL, access_mode  ; 0=read, 1=write, 2=both
MOV DX, offset filename
INT 21h
JC error
MOV handle, AX
\end{verbatim}

\subsection{Read File (AH=3Fh)}
\begin{verbatim}
MOV AH, 3Fh
MOV BX, handle
MOV CX, bytes_to_read
MOV DX, offset buffer
INT 21h
JC error
MOV bytes_read, AX
\end{verbatim}

\subsection{Write File (AH=40h)}
\begin{verbatim}
MOV AH, 40h
MOV BX, handle
MOV CX, bytes_to_write
MOV DX, offset buffer
INT 21h
JC error
MOV bytes_written, AX
\end{verbatim}

\subsection{Close File (AH=3Eh)}
\begin{verbatim}
MOV AH, 3Eh
MOV BX, handle
INT 21h
JC error
\end{verbatim}

\section{Memory Management}

\subsection{Allocate Memory (AH=48h)}
\begin{verbatim}
MOV AH, 48h
MOV BX, paragraphs   ; 1 paragraph = 16 bytes
INT 21h
JC error
MOV memory_block, AX
\end{verbatim}

\subsection{Free Memory (AH=49h)}
\begin{verbatim}
MOV AH, 49h
MOV ES, memory_block
INT 21h
JC error
\end{verbatim}

% ============================================================
% AKTIVITAS PEMBELAJARAN
% ============================================================

\begin{aktivitas}
  \item \textbf{Text Editor}: Buat text editor sederhana dengan BIOS dan DOS interrupts.
  
  \item \textbf{File Manager}: Implementasikan program file manager dengan create, read, write, delete operations.
  
  \item \textbf{Screen Manipulation}: Buat program yang menggambar border dan menu menggunakan video BIOS.
  
  \item \textbf{Input Validation}: Buat program dengan keyboard input validation menggunakan BIOS interrupts.
  
  \item \textbf{Memory Display}: Tampilkan memory map dan alokasi memori menggunakan DOS functions.
  
  \item \textbf{System Information}: Buat program yang menampilkan informasi sistem menggunakan BIOS calls.
\end{aktivitas}

% ============================================================
% LATIHAN DAN REFLEKSI
% ============================================================

\begin{latihan}
  \item Jelaskan perbedaan antara DOS interrupts dan BIOS interrupts! Kapan sebaiknya menggunakan masing-masing?
  
  \item Buat program yang:
  \begin{itemize}
    \item Menampilkan menu di layar
    \item Menerima input pilihan dari user
    \item Menjalankan fungsi sesuai pilihan
    \item Menggunakan BIOS untuk display dan DOS untuk I/O
  \end{itemize}
  
  \item Implementasikan program text viewer:
  \begin{itemize}
    \item Buka file teks
    \item Tampilkan isi file dengan paging
    \item Support scroll up/down
    \item Handle file not found error
  \end{itemize}
  
  \item Buat program untuk menghitung karakter dalam file teks.
  
  \item Implementasikan program copy file dengan progress indicator.
  
  \item Buat program yang menampilkan informasi tanggal dan waktu sistem.
  
  \item \textbf{Refleksi}: Interrupt mana yang paling sering Anda gunakan dan mengapa? Apa tantangan dalam error handling?
\end{latihan}

% ============================================================
% ASESMEN
% ============================================================

\begin{asesmen}
\textbf{Instrumen Penilaian untuk Sub-CPMK 6.1, 6.2, 2.1}

\textbf{A. Pilihan Ganda}

\begin{enumerate}
  \item Interrupt untuk display string di DOS adalah:
  \begin{enumerate}
    \item INT 10h
    \item INT 16h
    \item INT 20h
    \item INT 21h
  \end{enumerate}
  
  \item Fungsi untuk membaca karakter dari keyboard di DOS adalah:
  \begin{enumerate}
    \item AH = 01h
    \item AH = 02h
    \item AH = 09h
    \item AH = 4Ch
  \end{enumerate}
  
  \item Interrupt untuk video services adalah:
  \begin{enumerate}
    \item INT 10h
    \item INT 16h
    \item INT 21h
    \item INT 33h
  \end{enumerate}
  
  \item Register yang digunakan untuk function number di DOS interrupts adalah:
  \begin{enumerate}
    \item AX
    \item BX
    \item CX
    \item DX
  \end{enumerate}
\end{enumerate}

\textbf{B. Essay}

\begin{enumerate}
  \item Jelaskan langkah-langkah yang terjadi saat software interrupt dieksekusi!
  
  \item Mengapa BIOS interrupts lebih cepat untuk operasi video dibandingkan DOS interrupts?
\end{enumerate}

\textbf{C. Practical Challenge}

\begin{enumerate}
  \item Buat program notepad sederhana:
  \begin{itemize}
    \item Create new file
    \item Open existing file
    \item Edit text dengan insert/delete
    \item Save file
    \item Basic menu interface
    \item Error handling untuk semua operasi
  \end{itemize}
\end{enumerate}

\textbf{Rubrik Penilaian}: Lihat Lampiran A
\end{asesmen}

% ============================================================
% CHECKLIST KOMPETENSI
% ============================================================

\begin{checklist}
  \item Saya dapat menggunakan DOS interrupts untuk I/O operations
  \item Saya dapat menggunakan BIOS interrupts untuk video dan keyboard
  \item Saya dapat mengimplementasikan file handling dengan DOS
  \item Saya dapat mengelola memory allocation
  \item Saya dapat membuat program dengan user interface
  \item Saya dapat handle error conditions dengan interrupts
  \item Saya dapat memilih interrupt yang tepat untuk kasus tertentu
  \item Saya dapat mengoptimasi program dengan interrupt calls
\end{checklist}

% ============================================================
% RANGKUMAN
% ============================================================

\begin{rangkuman}
Bab ini membahas interupsi sistem dan fungsi BIOS/DOS untuk interaksi dengan hardware dan sistem operasi.

\textbf{Poin Kunci:}
\begin{itemize}
  \item Interrupts menyediakan antarmuka ke sistem operasi dan hardware
  \item DOS interrupts (INT 21h) untuk file I/O dan program control
  \item BIOS interrupts (INT 10h, 16h) untuk video dan keyboard langsung
  \item Function number ditentukan di register AH
  \item Parameter dan hasil dikirim melalui register tertentu
  \item Error handling dengan checking carry flag (CF)
  \item File handling memerlukan manajemen file handle
  \item Memory allocation untuk dynamic memory management
\end{itemize}

\textbf{Kata Kunci}: \textbf{\texttt{Interrupt}}, \textbf{\texttt{DOS}}, \textbf{\texttt{BIOS}}, \textbf{\texttt{INT 21h}}, \textbf{\texttt{INT 10h}}, \textbf{\texttt{File Handling}}, \textbf{\texttt{Memory Management}}, \textbf{\texttt{System Calls}}, \textbf{\texttt{TASM}}
\end{rangkuman}

\ifSubfilesClassLoaded{
  \renewcommand{\bibname}{Daftar Pustaka}
  \bibliographystyle{plain}
  \bibliography{../references}
}{}
\end{document}
