\section{Register dan Organisasi Memori}

\begin{figure}[H]
\centering
\includegraphics[width=0.85\textwidth]{8086_registers.png}
\caption{Register-Register Intel 8086}
\end{figure}

\subsection{General Purpose Registers}

Intel 8086 memiliki 8 general-purpose registers 16-bit yang dapat digunakan untuk berbagai operasi:

\begin{verbatim}
; Register breakdown (16-bit)
AX = AH + AL    ; Accumulator (High + Low)
BX = BH + BL    ; Base register
CX = CH + CL    ; Count register
DX = DH + DL    ; Data register
\end{verbatim}

\textbf{Fungsi Spesifik Register:}
\begin{itemize}
  \item \textbf{AX}: Akumulator utama—digunakan untuk operasi aritmatika (\asm{ADD}, \asm{SUB}), I/O (\asm{IN}/\asm{OUT}), dan return value. MUL/DIV menggunakan AX secara implisit.
  \item \textbf{BX}: Base register—untuk addressing modes \asm{[BX]}, \asm{[BX+SI]}. Pointer ke struktur data dan array.
  \item \textbf{CX}: Count register—counter untuk \asm{LOOP} (decrement otomatis) dan \asm{REP} (string ops). Juga untuk shift count (\asm{SHL AX, CL}).
  \item \textbf{DX}: Data register—extended accumulator untuk MUL/DIV (DX:AX), I/O port $>$255, dividend high untuk DIV.
\end{itemize}

\subsection{Special Purpose Registers}

\begin{verbatim}
; Special purpose registers
SP  - Stack Pointer (menunjuk ke top of stack)
BP  - Base Pointer (menunjuk ke base of stack frame)
SI  - Source Index (index register untuk string operations)
DI  - Destination Index (index register untuk string operations)
IP  - Instruction Pointer (menunjuk ke next instruction)
\end{verbatim}

\textbf{Penggunaan Special Registers:}
\begin{itemize}
  \item \textbf{SP}: Stack management—diubah otomatis oleh PUSH, POP, CALL, RET. Tidak diubah manual kecuali setup/cleanup.
  \item \textbf{BP}: Base pointer untuk stack frame—akses parameter (\asm{[BP+4]}) dan variabel lokal (\asm{[BP-2]}). Default segment: SS.
  \item \textbf{SI/DI}: String operations (MOVS, CMPS, LODS, STOS)—SI default DS, DI default ES. Juga untuk array indexing.
  \item \textbf{IP}: Program counter (tidak dapat diakses langsung; diubah oleh JMP, CALL, RET).
\end{itemize}

\subsection{Segment Registers}

\begin{verbatim}
; Segment registers untuk memory management
CS  - Code Segment (instruction pointer)
DS  - Data Segment (data access)
SS  - Stack Segment (stack operations)
ES  - Extra Segment (data transfer)
\end{verbatim}

\textbf{Segmentation Memory Model:}
\begin{itemize}
  \item \textbf{CS}: Berisi alamat segment untuk kode program
  \item \textbf{DS}: Berisi alamat segment untuk data
  \item \textbf{SS}: Berisi alamat segment untuk stack
  \item \textbf{ES}: Berisi alamat segment untuk string operations
\end{itemize}

\subsection{Segmentasi Memori}

\begin{figure}[H]
\centering
\includegraphics[width=0.8\textwidth]{8086_memory_segmentation.png}
\caption{Organisasi Memori Segmentasi Intel 8086}
\end{figure}

\subsection{Perhitungan Alamat Fisik}

Intel 8086 menggunakan model memori segmentasi di mana alamat logis terdiri dari pasangan \textbf{segment:offset}. Alamat fisik dihitung dengan formula:

\begin{center}
\textbf{Alamat Fisik} = (Segment $\times$ 16) + Offset
\end{center}

\begin{contoh}
\textbf{Contoh Perhitungan Alamat:}

Untuk CS:IP = 2000h:1000h:
\begin{itemize}
  \item Alamat fisik = (2000h $\times$ 10h) + 1000h = 20000h + 1000h = 21000h
\end{itemize}

Untuk DS:SI = 3000h:0050h:
\begin{itemize}
  \item Alamat fisik = (3000h $\times$ 10h) + 0050h = 30000h + 50h = 30050h
\end{itemize}
\end{contoh}

\subsection{Contoh Penggunaan Register dalam Instruksi}

Berikut contoh instruksi assembly yang memanfaatkan register:

\begin{verbatim}
; Load immediate value ke AX
MOV AX, 1234h

; Copy dari AX ke BX (register addressing)
MOV BX, AX

; Store ke memory (direct addressing)
MOV [0100h], AX

; Access dengan segment:offset
MOV AX, DS:[SI]
\end{verbatim}

\textbf{Contoh SI/DI untuk string:} \asm{MOV SI, OFFSET src} / \asm{MOV DI, OFFSET dst} lalu \asm{REP MOVSB} untuk menyalin string. \textbf{Contoh BP untuk stack frame:} \asm{PUSH BP} / \asm{MOV BP, SP} lalu \asm{MOV AX, [BP+4]} untuk akses parameter yang di-push sebelum CALL.
